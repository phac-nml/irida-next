---
sidebar_position: 4
id: ga4gh_wes
title: Connexion à un serveur GA4GH WES
---

### Connexion au serveur

Pour connecter IRIDA Next à un serveur GA4GH, vous devrez modifier votre fichier d'informations d'identification rails. Ce fichier est chiffré afin que les jetons secrets soient sécurisés.

Modifiez votre fichier d'informations d'identification de production avec la commande suivante.

`EDITOR="vim --nofork" bin/rails credentials:edit --environment production`

[En savoir plus sur le fichier d'informations d'identification rails ici](https://guides.rubyonrails.org/security.html#custom-credentials)

Les champs suivants peuvent être définis.

```yml
ga4gh_wes:
  server_url_endpoint: 'https://<some server url>/wes/1.01/'
  oauth_token: <some oauth token>
  headers: { '<some header key>': '<some header value>' }
```

Seul `server_url_endpoint` est requis par défaut, mais selon la configuration de votre serveur GA4GH WES, les autres champs peuvent également être requis.

#### server_url_endpoint : *Requis

Définissez le point de terminaison du serveur.

Lorsque cela est défini, assurez-vous d'inclure le point de terminaison complet. par ex. `https://subdomain.domain.tld/wes/1.01/`

Exemple : Si votre point de terminaison pour obtenir le chemin Service Info est `localhost:1122/service-info`, votre point de terminaison est `localhost:1122`

#### oauth_token : *Optionnel

Jeton Bearer pour OAuth 2.0

Si votre serveur GA4GH WES utilise OAuth 2.0 pour l'authentification, ce champ est requis.

#### headers : *Optionnel

Peut être utilisé pour définir de nouveaux en-têtes et remplacer les en-têtes de l'API REST existants.

Cela permet une authentification supplémentaire ou des paramètres de serveur pour votre déploiement spécifique de GA4GH WES.

### Stockage des données

GA4GH WES et IRIDA Next doivent avoir un répertoire de données (ou un système de stockage cloud équivalent) auquel les deux services peuvent accéder.

[Pour configurer votre service de stockage, consultez ce guide.](configuration/storage.md)

#### Nettoyage de l'exécution du flux de travail

IRIDA Next est conçu pour nettoyer les fichiers intermédiaires une fois qu'un flux de travail est terminé. Pour ce faire, il doit avoir la permission de supprimer les fichiers générés par GA4GH WES.

Les fichiers suivent cette structure.

```txt
storage_directory/
├── <some blob id>/
|   ├── <various files>
|   ├── input/
|   │   └── <various files generated by IRIDA Next>
|   └── output/
|       └── <various files generated by GA4GH WES>
├── <some other blobs>
```

Après qu'une exécution de flux de travail soit terminée, tous les fichiers du répertoire `<some blob id>` doivent être supprimés. Si vous constatez que les fichiers `<some blob id>/output/` restent, vous devez donner au processus IRIDA Next la permission de supprimer les fichiers dans le stockage de fichiers.

### Développement

[Pour le guide sur la configuration d'un serveur GA4GH WES à des fins de développement d'IRIDA Next, consultez ce guide.](development/integration/ga4gh_wes_sapporo_setup.md)
