<%= form_with(url: "#", builder: Pathogen::FormBuilders::PathogenFormBuilder, local: true) do |form| %>
  <div class="space-y-6">
    <h3 class="text-lg font-medium text-slate-900 dark:text-white">Workflow Configuration Example</h3>

    <fieldset class="space-y-4">
      <legend class="text-base font-medium text-slate-700 dark:text-slate-300">Quality Control Settings</legend>

      <%= pathogen_checkbox(
        :enable_adapter_trimming,
        {
          label: "Enable adapter trimming",
          help_text: "Remove sequencing adapters prior to downstream steps",
          checked: true,
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :filter_low_quality_reads,
        {
          label: "Filter low-quality reads",
          help_text: "Discard reads below Phred score threshold",
          checked: true,
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :detect_contamination,
        {
          label: "Run contamination screen",
          help_text: "Flag possible cross-sample contamination",
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :store_intermediate_qc,
        {
          label: "Store intermediate QC files",
          help_text: "Retain trimmed & filtered FASTQ outputs",
        },
        "1",
        "0",
        form: form,
      ) %>
    </fieldset>

    <fieldset class="space-y-4">
      <legend class="text-base font-medium text-slate-700 dark:text-slate-300">Data Governance</legend>

      <%= pathogen_checkbox(
        :metadata_schema_validation,
        {
          label: "Enforce metadata schema validation",
          help_text: "Reject uploads missing required fields",
          required: true,
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :restrict_external_export,
        {
          label: "Restrict external export",
          help_text: "Disallow automated sharing to third-party systems",
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :audit_retention_extended,
        {
          label: "Extend audit log retention",
          help_text: "Keep provenance & access logs longer",
        },
        "1",
        "0",
        form: form,
      ) %>
    </fieldset>

    <fieldset class="space-y-4">
      <legend class="text-base font-medium text-slate-700 dark:text-slate-300">Analysis Preferences</legend>

      <%= pathogen_checkbox(
        :enable_amr_detection,
        {
          label: "AMR gene detection",
          help_text: "Identify known antimicrobial resistance markers",
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :enable_virulence_scan,
        {
          label: "Virulence factor scan",
          help_text: "Detect presence of curated virulence genes",
          checked: true,
        },
        "1",
        "0",
        form: form,
      ) %>

      <%= pathogen_checkbox(
        :enable_phylogeny,
        { label: "Phylogenetic tree", help_text: "Generate SNP or core genome tree" },
        "1",
        "0",
        form: form,
      ) %>
    </fieldset>
  </div>
<% end %>
