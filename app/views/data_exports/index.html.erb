<%= turbo_refreshes_with method: :morph, scroll: :preserve %>

<%= turbo_stream_from current_user, :data_exports %>

<%= render Viral::PageHeaderComponent.new(title: t(".title")) %>

<% if @has_data_exports %>
  <div class="flex justify-end mb-4">
    <%= render SearchComponent.new(
      query: @q,
      url: data_exports_url,
      search_attribute: :id_or_name_cont,
    label: t('common.controls.search'),
      placeholder: t(:".search.placeholder"),
      total_count: @pagy.count,
      class: "max-sm:grow",
      value: @q.id_or_name_cont,
    ) %>
  </div>
<% end %>

<%= render partial: "table",
locals: {
  has_data_exports: @has_data_exports,
  data_exports: @data_exports,
  pagy: @pagy,
  q: @q,
} %>
