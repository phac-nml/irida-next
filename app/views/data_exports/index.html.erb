<%= turbo_refreshes_with method: :morph, scroll: :preserve %>

<%= turbo_stream_from current_user, :data_exports %>

<%= render Viral::PageHeaderComponent.new(title: t(".title")) %>

<div class="flow-root">
  <div class="flex flex-row-reverse items-center mb-2">
    <%= form_with model: @q, url:data_exports_url, method: :get, class: "inline-flex", data: {turbo_action: "replace"} do |form| %>
      <%= render SearchFieldComponent.new(
        form: form,
        label: t(".search.label"),
        placeholder: t(".search.placeholder"),
        field_name: :id_or_name_cont,
        value: @q.id_or_name_cont,
      ) %>
    <% end %>
  </div>
</div>

<%= render partial: "table",
locals: {
  has_data_exports: @has_data_exports,
  data_exports: @data_exports,
  pagy: @pagy,
  q: @q,
} %>
