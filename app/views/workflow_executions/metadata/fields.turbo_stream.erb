<%= turbo_stream.append "samplesheet-payload-container" do %>
  <% if Flipper.enabled?(:deferred_samplesheet) %>
    <div
      hidden
      data-metadata="<%= @metadata %>"
      data-headers="<%= @headers %>"
      data-nextflow--deferred-samplesheet-target="dataPayload"
      data-payload-type="metadata"
    />
  <% else %>
    <div
      hidden
      data-controller="nextflow--metadata"
      data-nextflow--metadata-metadata-value="<%= @metadata %>"
      data-nextflow--metadata-property-value="<%= @header %>"
      data-nextflow--samplesheet-target="dataPayload"
    />
  <% end %>
<% end %>
