<%= viral_card do |card| %>
  <% card.header(title: t("groups.edit.advanced.transfer.title")) %>
  <% card.section do %>

    <% t("groups.edit.advanced.transfer.descriptions").each do |description| %>
      <p class="mb-2 text-base text-gray-900 dark:text-white"><%= description %></p>
    <% end %>
    <ul
      class="
        mb-4
        ml-4
        space-y-1
        text-gray-500
        list-disc
        list-inside
        dark:text-gray-400
      "
    >
      <% t("groups.edit.advanced.transfer.points").each do |item| %>
        <li><%= item %></li>
      <% end %>
    </ul>

    <div data-controller="transfer">
      <div class="hidden confirm-transfer">
        <div
          class="
            flex
            p-4
            mb-4
            text-red-800
            rounded-lg
            bg-red-50
            dark:bg-gray-800
            dark:text-red-400
          "
        >
          <%= viral_icon(name: "exclamation_circle", classes: "h-6 w-6 flex-none") %>
          <span class="flex-1 ml-4"><%= t(
              "groups.edit.advanced.transfer.confirm.warning_html",
              group_name: group.human_name
            ) %></span>
        </div>
        <div class="mb-4">
          <% t("groups.edit.advanced.transfer.confirm.points_html", group: group.path).each do |item| %>
            <p class="mb-2 text-base text-gray-900 dark:text-white"><%= item %></p>
          <% end %>
        </div>
      </div>
      <%= form_with(url: group_transfer_path, method: :put, class: "grid gap-4", data: { turbo_confirm: "" }) do |form| %>
        <div class="form-field">
          <%= form.label :new_namespace_id,
                     t("groups.edit.advanced.transfer.new_namespace_id") %>
          <%= form.collection_select(
            :new_namespace_id,
            @authorized_namespaces,
            :id,
            :full_name,
            { prompt: t("groups.edit.advanced.transfer.new_namespace_id") },
            { data: { action: "transfer#onChange" } }
          ) %>
          <% if @error.present? %>
            <p class="text-sm text-red-500 dark:text-red-400"><%= @error %></p>
          <% end %>
        </div>
        <div>
          <%= form.submit t("groups.edit.advanced.transfer.submit"),
                      class:
                        "button button--state-destructive button--size-default inline-block",
                      disabled: true,
                      data: {
                        "transfer-target": "submitButton",
                        turbo_content: ".confirm-transfer",
                        confirm_value: group.path
                      } %>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>
