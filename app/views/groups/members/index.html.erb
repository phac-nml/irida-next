<%= render Viral::PageHeaderComponent.new(title: t(:'.title'), subtitle: t(:'.subtitle', namespace_type: @namespace.class.model_name.human, namespace_name: @namespace.name)) do |component| %>
  <%= component.with_icon(name: "users", classes: "h-14 w-14 text-primary-700") %>
  <%= component.with_buttons do %>
    <% if allowed_to?(:create_member?, @namespace) %>
      <%= link_to t(:".add"),
                  new_group_member_path(@namespace),
                  class: "button button--state-primary button--size-default",
                  "aria-label": t(:".actions.button_add_aria_label") %>
    <% end %>
  <% end %>
<% end %>

<div class="bg-white dark:bg-slate-800">
  <div class="flex flex-col">
    <div class="overflow-x-auto">
      <div class="shadow">
        <%= turbo_frame_tag("member-update-alert") %>
        <%= turbo_frame_tag("member-remove-alert") %>
        <table class="min-w-full table-fixed dark:divide-slate-600">
          <thead class="text-slate-700 bg-slate-50 dark:bg-slate-700 dark:text-slate-400">
            <tr>
              <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.username") %></th>
              <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.access_level") %></th>
              <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.source") %></th>
              <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.access_granted") %></th>
              <th scope="col" class="px-6 py-3 text-right"><%= t(:"groups.members.index.table_header.action") %></th>
            </tr>
          </thead>
          <tbody
            id="members-table-body"
            class="bg-white divide-y divide-slate-200 dark:bg-slate-800 dark:divide-slate-700"
          >
            <% @members.each do |member| %>
              <%= render partial: "member",
                locals: {
                  member: member,
                  access_levels: @access_levels
                } %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <%= render PaginationComponent.new(
      info: pagy_info(@pagy),
      prev_url: (@pagy.prev ? group_members_url(@group, page: @pagy.prev) : nil),
      next_url: (@pagy.next ? group_members_url(@group, page: @pagy.next) : nil)
    ) %>
  </div>
</div>
