<%= turbo_stream.update "members" do %>
  <table class="min-w-full table-fixed dark:divide-slate-600">
    <thead class="text-slate-700 bg-slate-50 dark:bg-slate-700 dark:text-slate-400">
      <tr>
        <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.username") %></th>
        <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.access_level") %></th>
        <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.source") %></th>
        <th scope="col" class="px-6 py-3 text-left"><%= t(:"groups.members.index.table_header.access_granted") %></th>
        <th scope="col" class="px-6 py-3 text-right"><%= t(:"groups.members.index.table_header.action") %></th>
      </tr>
    </thead>
    <tbody
      id="members-table-body"
      class="bg-white divide-y divide-slate-200 dark:bg-slate-800 dark:divide-slate-700"
    >
      <% @members.each do |member| %>
        <%= render partial: "member",
          locals: {
            member: member,
            access_levels: @access_levels
          } %>
      <% end %>
    </tbody>
  </table>
  <%= turbo_frame_tag "members_pagination" %>
<% end %>

<%= turbo_stream.update "members_pagination" do %>
  <%= render PaginationComponent.new(
    info: pagy_info(@pagy),
    prev_url: (@pagy.prev ? group_members_url(@group, page: @pagy.prev) : nil),
    next_url: (@pagy.next ? group_members_url(@group, page: @pagy.next) : nil)
  ) %>
<% end %>
