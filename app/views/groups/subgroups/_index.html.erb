<%= search_form_for @q, url: group_path(@group), html: { "data-turbo-permanent": "true" } do |f| %>
  <%= f.label :puid_or_name_cont, "SEARCH", class: "sr-only"%>
  <%= f.search_field :puid_or_name_cont,
                 placeholder: "Shitty search",
                 value: params[:search],
                 class: "form-control mb-3" %>
  <%= f.submit "SEARCH", class: "btn btn-primary mb-3" %>
<% end %>

<% if @namespaces.length > 0 %>
  <%= render NamespaceTreeContainerComponent.new(
    namespaces: @namespaces,
    path: "group_subgroups_path",
    path_args: {
      group_id: @group.full_path,
    },
    type: [Group.sti_name, Namespaces::ProjectNamespace.sti_name],
  ) %>
  <%= render Viral::Pagy::FullComponent.new(@pagy, item: "Subgroups and projects") %>
<% else %>
  <%= viral_empty(
    title: t(:"groups.show.subgroups.no_subgroups.title"),
    description: t(:"groups.show.subgroups.no_subgroups.description"),
    icon_name: :squares_2x2,
  ) %>
<% end %>
