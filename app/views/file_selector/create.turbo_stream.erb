<%= turbo_stream.update "file_selector_dialog",
                    partial: "file_selector/file_selector_dialog",
                    locals: {
                      open: false,
                      file_selector_params:,
                    } %>

<turbo-stream
  action="replace"
  target="<%= "#{@attachable.id}_#{file_selector_params["file_filter_params"]["name"]}"%>"
>
  <template>
    <%= render Nextflow::Samplesheet::FileCellComponent.new(
      @attachable,
      file_selector_params["file_filter_params"]["name"],
      @attachment_params,
      file_selector_params["index"],
      file_selector_params["required"],
      file_selector_params["file_filter_params"],
    ) %>
  </template>
</turbo-stream>

<% if @associated_attachment_params %>
  <turbo-stream
    action="replace"
    target="<%= "#{@attachable.id}_#{@associated_attachment_params[:file_filter_params][:name]}"%>"
  >
    <template>
      <%= render Nextflow::Samplesheet::FileCellComponent.new(
        @attachable,
        @associated_attachment_params[:file_filter_params][:name],
        @associated_attachment_params[:file],
        file_selector_params["index"],
        file_selector_params["required"],
        @associated_attachment_params[:file_filter_params],
      ) %>
    </template>
  </turbo-stream>
<% end %>
