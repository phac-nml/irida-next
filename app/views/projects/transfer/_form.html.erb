<%= render ConfirmationComponent.new(value: @project.name, title: t("projects.edit.advanced.transfer.confirm.title")) do |confirmation| %>
  <div data-controller="confirmation">
    <%= form_with(url: namespace_project_transfer_index_path, method: :post, class: "grid gap-4", id: "edit_advanced_transfer") do |form| %>
      <div class="form-field">
        <%= form.label :new_namespace_id,
                   t(:"projects.edit.advanced.transfer.new_namespace_id") %>
        <%= form.collection_select(
          :new_namespace_id,
          @authorized_namespaces,
          :id,
          :full_name,
          { prompt: t(:"projects.edit.advanced.transfer.new_namespace_id") },
          {
            data: {
              action: "confirmation#onChange"
            },
            class: @error.present? ? "error" : ""
          }
        ) %>
        <% if @error.present? %>
          <p class="text-sm text-red-500 dark:text-red-400"><%= @error %></p>
        <% end %>
      </div>
      <div>
        <% confirmation.message do %>
          <div
            class="flex p-4 mb-4 text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
            role="alert"
          >
            <%= viral_icon(name: "exclamation_circle", classes: "h-6 w-6 flex-none") %>
            <span class="flex-1 ml-4"><%= t("projects.edit.advanced.transfer.confirm.warning_html", project_name: @project.human_name) %>
          </div>
          <div class="mb-4">
          <% t("projects.edit.advanced.transfer.confirm.points_html", project: @project.name ).each do |item| %>
            <p class="mb-2 text-base text-gray-900 dark:text-white"><%= item %></p>
          <% end %>
          </div>
        <% end %>
        <%= form.submit t("projects.edit.advanced.transfer.submit"),
                    disabled: true,
                    data: {
                      turbo_confirm: "Are you sure",
                      "confirmation-target": "submitButton"
                    },
                    class: "button button--size-default button--state-destructive" %>
      </div>
    <% end %>
  </div>
<% end %>
