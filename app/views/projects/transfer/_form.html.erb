<%= render ConfirmationComponent.new(value: @project.name) do |confirmation| %>
  <div data-controller="confirmation">
    <%= form_with(url: namespace_project_transfer_index_path, method: :post, class: "grid gap-4", id: "edit_advanced_transfer") do |form| %>
      <div class="form-field">
        <%= form.label :new_namespace_id,
                       t(:"projects.edit.advanced.transfer.new_namespace_id") %>
        <%= form.collection_select(
              :new_namespace_id,
              @authorized_namespaces,
              :id,
              :full_name,
              { prompt: t(:"projects.edit.advanced.transfer.new_namespace_id") },
              { data: { 'action': 'confirmation#onChange' },
                class: @error.present? ? "error" : ""
              }
            ) %>
        <% if @error.present? %>
          <p class="text-sm text-red-500 dark:text-red-400"><%= @error %></p>
        <% end %>
      </div>
      <div>
        <% confirmation.message do %>
          <div class="p-4 mb-4 text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 flex" role="alert">
            <%= viral_icon(name: "exclamation_circle", classes: "h-6 w-6 flex-none") %>
            <span class="flex-1 ml-4">You are going to transfer <%= @project.human_name %> to another namespace.  Are you ABSOLUTELY sure?</span>
          </div>
          <p class="text-base text-gray-900 dark:text-white mb-2">To prevent accidental actions we ask you to confirm
            your intention.</p>
          <p class="text-base text-gray-900 dark:text-white mb-4">Please type <code><%= project.name %></code> to
            proceed or close this dialog to cancel</p>
        <% end %>
        <%= form.submit t("projects.edit.advanced.transfer.submit"),
                        disabled: true,
                        data: { turbo_confirm: "Are you sure", 'confirmation-target': 'submitButton' },
                        class: "button button--size-default button--state-destructive" %>
      </div>
    <% end %>
  </div>
<% end %>