<%= render Viral::PageHeaderComponent.new(title: t("projects.index.title"), subtitle: t("projects.index.subtitle")) do |component| %>
  <%= component.with_icon do %>
    <%= viral_icon(name: "rectangle_stack", classes: "h-14 w-14 text-primary-700") %>
  <% end %>
  <%= component.with_buttons do %>
    <%= link_to t(:"projects.index.create_project_button"),
    new_project_path,
    class: "button button--state-primary button-size--default" %>
  <% end %>
<% end %>

<div class="bg-white dark:bg-gray-800">
  <div class="flex flex-col" data-turbo-temporary>
    <% if @has_projects %>
      <%= turbo_frame_tag "projects_list", src: projects_url(format: :turbo_stream, page: params[:page]), loading: :lazy do %>
        <table class="min-w-full table-fixed dark:divide-gray-600">
          <tbody
            class="
              bg-white
              divide-y
              divide-gray-200
              dark:bg-gray-800
              dark:divide-gray-700
            "
          >
            <% 15.times do %>
              <tr>

                <td class="p-4 animate-pulse">
                  <div class="flex-1 py-1 space-y-6">
                    <div class="space-y-3">
                      <div class="w-48 h-2 rounded bg-slate-200"></div>
                      <div class="w-32 h-2 rounded bg-slate-200"></div>
                    </div>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>
      <%= turbo_frame_tag "projects_pagination",
      data: {
        controller: "turbo-frame-history"
      } %>
    <% end %>
  </div>
</div>
