<% if @automated_workflow_executions.count.positive? %>
  <%= viral_data_table(@automated_workflow_executions, id: "automated_workflow_executions") do |table| %>
    <% table.with_column(t(".headers.id"),
      sticky_key: :left
    ) do |row| %>
      <%= row[:id] %>
    <% end %>
    <% table.with_column(t(".headers.name")) do |row| %>
      <%= row[:name] %>
    <% end %>
    <% table.with_column(t(".headers.workflow_name")) do |row| %>
      <%= row.metadata["workflow_name"] %>
    <% end %>
    <% table.with_column(t(".headers.workflow_version")) do |row| %>
      <%= row.metadata["workflow_version"] %>
    <% end %>
    <% table.with_column(t(".headers.created_at")) do |row| %>
      <%= local_date(row[:created_at], :long) %>
    <% end %>
    <% table.with_column(t(".headers.updated_at")) do |row| %>
      <%= local_time_ago(row[:updated_at]) %>
    <% end %>
    <% table.with_column(t(".headers.status")) do |row| %>
      <% if row[:disabled] %>
        <%= viral_pill(text: t(".disabled"), color: "red") %>
      <% else %>
        <%= viral_pill(text: t(".enabled"), color: "green") %>
      <% end %>
    <% end %>
    <% table.with_column(t(".headers.actions"),
        classes: "flex justify-start"
      ) do |row| %>
      <% unless row.disabled %>
        <%= button_to t(:"projects.automated_workflow_executions.actions.edit"),
        edit_namespace_project_automated_workflow_execution_path(
          @project.parent,
          @project,
          row,
        ),
        data: {
          turbo_stream: true,
        },
        method: :get,
        aria: {
          label:
            t(
              :"projects.automated_workflow_executions.actions.edit_aria_label",
              name: (row[:name].nil? ? row[:id] : row[:name]),
            ),
        },
        class:
          "font-medium text-blue-600 underline dark:text-blue-400 hover:no-underline cursor-pointer mr-2" %>
      <% end %>
      <%= button_to t(:"projects.automated_workflow_executions.actions.delete"),
      namespace_project_automated_workflow_execution_path(
        @project.parent,
        @project,
        row,
      ),
      data: {
        turbo_method: :delete,
        turbo_confirm:
          t(:"projects.automated_workflow_executions.actions.delete_confirm"),
      },
      method: :delete,
      aria: {
        label:
          t(
            :"projects.automated_workflow_executions.actions.delete_aria_label",
            name: (row[:name].nil? ? row[:id] : row[:name]),
          ),
      },
      class:
        "font-medium text-blue-600 underline dark:text-blue-400 hover:no-underline cursor-pointer" %>
    <% end %>
  <% end %>
<% else %>
  <div class="empty_state_message">
    <%= viral_empty(
      title: t(:".empty.title"),
      description: t(:".empty.description"),
      icon_name: ICON::FILE_TEXT,
    ) %>
  </div>
<% end %>
