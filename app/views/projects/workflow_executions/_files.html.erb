<div class="flex flex-row-reverse mb-4">
  <% if Flipper.enabled?(:workflow_execution_attachments_searching) %>
    <%= form_with model: @q, url:namespace_project_workflow_execution_path(@namespace.parent, @namespace.project, @workflow_execution), method: :get, class: "inline-flex", data: {turbo_action: "replace"} do |form| %>
        <%= render SearchFieldComponent.new(
          form: form,
          label: t(".search.label"),
          placeholder: t(".search.placeholder"),
          field_name: :puid_or_file_blob_filename_cont,
          value: @q.puid_or_file_blob_filename_cont,
        ) %>
        <%= hidden_field_tag :limit, @pagy.limit %>
        <%= hidden_field_tag :tab, @tab %>
    <% end %>
  <% end %>
</div>

<%= render Attachments::TableComponent.new(
  @attachments,
  @pagy,
  @q,
  @workflow_execution,
  true,
  @has_attachments,
  abilities: {
  },
  row_actions: {
    preview: Flipper.enabled?(:attachments_preview),
  },
  empty: {
    icon_name: ICON::FILE_TEXT,
    title: t("workflow_executions.files.empty.title"),
    description: t("workflow_executions.files.empty.description"),
  },
) %>
