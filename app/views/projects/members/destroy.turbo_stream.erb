<%= turbo_stream.append "flashes" do %>
  <%= viral_flash(
    type:,
    data: message
  ) %>
<% end %>

<% if member.deleted? %>
  <%= turbo_stream.update "members", partial: "member_listing" %>

  <%= turbo_stream.update "members_pagination" do %>
   <%= render PaginationComponent.new(
    info: pagy_info(@pagy),
    prev_url:
      (
        if @pagy.prev
          namespace_project_members_url(
            @namespace.parent,
            @namespace.project,
            page: @pagy.prev
          )
        else
          nil
        end
      ),
    next_url:
      (
        if @pagy.next
          namespace_project_members_url(
            @namespace.parent,
            @namespace.project,
            page: @pagy.next
          )
        else
          nil
        end
      )
  ) %>
  <% end %>
<% end %>
