<%= viral_dialog(open: open,classes: ["overflow-visible"]) do |dialog| %>>
  <%= dialog.with_header(title: t("projects.bots.index.bot_listing.new_bot_modal.title")) %>
  <%= dialog.with_section do %>

    <div class="mb-6 text-lg font-normal text-gray-500 dark:text-gray-400">
      <p class="dark:text-gray-400">
        <%= t("projects.bots.index.bot_listing.generate_new_token_bot_modal.description") %>
      </p>
    </div>

    <div class="mb-4">
      <%= turbo_frame_tag("new_bot_account-error-alert") %>
    </div>

   <%= form_for(:bot, url: namespace_project_bots_path, method: :post) do |form| %>
      <div class="grid gap-4">
        <div class="form-field">
          <%= form.label :token_name, t("projects.bots.index.generate_new_token_bot_modal.token_name") %>
          <%= form.text_field :token_name,
                          required: true,
                          value: !bot_params.nil? ? bot_params[:token_name] : "",
                          class: "form-control" %>

        </div>


        <div class="form-field datepicker" data-controller="datepicker">
          <%= form.label :expires_at, t("projects.bots.index.generate_new_token_bot_modal.expires_at") %>
          <div class="relative max-w-sm">
            <div
              class="
                absolute
                inset-y-0
                left-0
                flex
                items-center
                pl-3
                pointer-events-none
              "
            >
              <%= viral_icon(
                name: :calendar_days,
                classes: "w-5 h-5 text-gray-500 dark:text-gray-400"
              ) %>
            </div>
            <%= form.text_field :expires_at,
                            placeholder: I18n.t("date.formats.iso"),
                            autocomplete: "off",
                            value: !bot_params.nil? ? bot_params[:expires_at] : "",
                            "data-datepicker-target": "datePicker",
                            "data-datepicker-dialog": "true" %>
          </div>
        </div>

        <div class="form-field">
        <%= form.label :scopes %>
        <% Irida::Auth.all_available_scopes.each do |scope| %>
          <div class="flex">
            <div class="flex items-center h-5">
              <%= check_box_tag "bot[scopes][]",
              scope,
              id: "bot_scopes_#{scope}" %>
            </div>
            <div class="ml-2 text-sm">
              <%= label_tag "bot_scopes_#{scope}",
              scope,
              class: "font-medium text-slate-900 dark:text-slate-300" %>
              <p
                id="<%= "bot_scopes_#{scope}_help-text" %>"
                class="text-xs font-normal text-slate-500 dark:text-slate-300"
              ><%= t("auth.scopes.#{scope}") %></p>
            </div>
          </div>
        <% end %>
        </div>

      </div>
        <div class="my-4">
          <%= form.submit t('projects.bots.index.bot_listing.generate_new_token_bot_modal.submit'),
                      class: "button button--size-default button--state-primary" %>
          <button
            type="button"
            class="button button--size-default button--state-default"
            data-action="click->viral--dialog#close"
          >
            <%= t('projects.bots.index.bot_listing.generate_new_token_bot_modal.cancel') %>
          </button>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>
