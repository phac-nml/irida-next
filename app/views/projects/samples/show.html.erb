<%= render Viral::PageHeaderComponent.new(title: @sample.name, subtitle: @sample.description) do |component| %>
  <%= component.with_icon(name: "beaker", classes: "h-14 w-14 text-primary-700") %>
  <%= component.with_buttons do %>
    <div class="flex flex-row">
      <% if allowed_to?(:new?, @project) %>
        <%= link_to(
          t("projects.samples.show.edit_button"),
          edit_namespace_project_sample_path(id: @sample.id),
          class: "button button--state-primary button--size-default mr-1"
        ) %>
      <% end %>
      <% if allowed_to?(:destroy?, @project) %>
        <%= link_to(
          t("projects.samples.show.remove_button"),
          namespace_project_sample_path(id: @sample.id),
          data: {
            turbo_method: :delete,
            turbo_confirm: t("projects.samples.show.remove_button_confirmation")
          },
          class: "button button--state-default button--size-default mr-1"
        ) %>
      <% end %>
    </div>
  <% end %>
<% end %>

<%= viral_card do |card| %>
  <% if @sample.attachments.any? %>
    <% card.with_header(title: t("projects.samples.show.files")) do |header| %>
      <% if allowed_to?(:update?, @project) %>
        <% header.with_action do %>
          <%= render partial: "projects/samples/attachments/new_attachment_modal",
          locals: {
            open: false,
            attachment: @attachment
          } %>
        <% end %>
      <% end %>
    <% end %>
    <% card.with_section do %>
      <%= render partial: "projects/samples/attachments/table",
      locals: {
        attachments: @sample.attachments
      } %>
    <% end %>
  <% else %>
    <%= render partial: "layouts/partials/empty_content",
    locals: {
      text_title: t("projects.samples.show.no_files"),
      text_note: t("projects.samples.show.no_associated_files"),
      btn_action_partial: "projects/samples/attachments/new_attachment_modal",
      btn_action_permission: allowed_to?(:update?, @project),
      attachment: @attachment
    } %>
  <% end %>
<% end %>
