<div class="table-container">
  <table
    class="w-full text-sm text-left text-slate-500 dark:text-slate-400 mb-4"
    data-controller="selection"
    data-selection-action-link-outlet=".action-link"
  >
    <thead class="text-slate-700 bg-slate-50 dark:bg-slate-900 dark:text-slate-400">
      <tr>
        <th aria-hidden="true" class="px-6 py-3"></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.metadata_field") %></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.value") %></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.provider") %></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.last_modified") %></th>
      </tr>
    </thead>
    <tbody id="metadata-table-body">
      <% @sample.metadata.each do |metadata_field, value| %>
        <tr id="<%= metadata_field%>" class="bg-white border-b dark:bg-slate-800 dark:border-slate-700">
            <td class="px-6 py-4">
                <%= check_box_tag "metadata_fields[]",
                (
                    metadata_field
                ),
                nil,
                id: dom_id(@sample, metadata_field),
                "aria-label": metadata_field,
                data: {
                selection_target: "rowSelection",
                action: "input->selection#toggle"
                },
                class:
                "w-4 h-4 text-primary-600 bg-slate-100 border-slate-300 rounded focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-slate-800 focus:ring-2 dark:bg-slate-700 dark:border-slate-600" %>
            </td>
            <td class="px-6 py-4"><%= metadata_field %></td>
            <td class="px-6 py-4"><%= value %></td>
            <% if @sample.metadata_provenance[metadata_field]["source"] == 'user' %>
                <td class="px-6 py-4"><%= User.find(@sample.metadata_provenance[metadata_field]["id"]).email %></td>
            <% else %>
                <td class="px-6 py-4">Analysis <%= @sample.metadata_provenance[metadata_field]["id"] %></td>
            <% end %>
            <td class="px-6 py-4">time placeholder</td>

        <%
=begin%>
 <td class="px-6 py-4"><%= viral_time_ago(original_time: @sample.metadata_provenance[metadata_field]["updated_at"]) %></td>
<%
=end%>

        </tr>
      <% end %>
    </tbody>
  </table>
  <div class="empty_state_message">
    <%= viral_empty(
      title: t(:"projects.samples.show.no_metadata"),
      description: t(:"projects.samples.show.no_associated_metadata"),
      icon_name: :document_text
    ) %>
  </div>
</div>
