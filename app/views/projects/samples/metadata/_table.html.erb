<div class="table-container">
  <table
    class="w-full text-sm text-left text-slate-500 dark:text-slate-400 mb-4"
    data-controller="selection"
    data-selection-action-link-outlet=".action-link"
    id="metadata-table"
  >
    <thead class="text-slate-700 bg-slate-50 dark:bg-slate-900 dark:text-slate-400">
      <tr>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.metadata_field") %></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.value") %></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.provider") %></th>
        <th scope="col" class="px-6 py-3"><%= t("projects.samples.show.table_header.last_modified") %></th>
      </tr>
    </thead>
    <tbody>
      <% @sample.metadata.each do |metadata_field, value| %>
        <tr id="<%= metadata_field%>" class="bg-white border-b dark:bg-slate-800 dark:border-slate-700">
          <td class="px-6 py-4"><%= metadata_field %></td>
          <td class="px-6 py-4"><%= value %></td>
          <% if @sample.metadata_provenance[metadata_field]["source"] == 'user' %>
              <td class="px-6 py-4"><%= User.find(@sample.metadata_provenance[metadata_field]["id"]).email %></td>
          <% else %>
              <td class="px-6 py-4"><%= t("projects.samples.show.metadata.analysis") %> <%= @sample.metadata_provenance[metadata_field]["id"] %></td>
          <% end %>
          <td class="px-6 py-4"><%= viral_time_ago(original_time: @sample.metadata_provenance[metadata_field]["updated_at"]) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <div class="empty_state_message">
    <%= viral_empty(
      title: t(:"projects.samples.show.no_metadata"),
      description: t(:"projects.samples.show.no_associated_metadata"),
      icon_name: :document_text
    ) %>
  </div>
</div>
