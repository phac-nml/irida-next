<%= viral_card(title: t(:'.preferences')) do |card| %>
  <% card.with_section(border_bottom: true, border_top: true) do %>
    <fieldset class="grid grid-cols-1 gap-4" data-controller="colour-mode">
      <legend
        class="
          mb-2 text-sm font-semibold text-slate-800 dark:text-white uppercase
        "
      >
        <%= t(".theme_title") %>
      </legend>

      <%= p_radio_button(
        attribute: :color_theme,
        value: "system",
        input_name: "color-theme",
        label: t(".system_theme"),
        checked: params[:color_theme] == "system",
        help_text: t(".system_desc"),
        data: {
          action: "change->colour-mode#toggleTheme",
          "colour-mode-target": "system",
        },
      ) %>

      <%= p_radio_button(
        attribute: :color_theme,
        value: "dark",
        input_name: "color-theme",
        label: t(".dark_theme"),
        checked: params[:color_theme] == "dark",
        data: {
          action: "change->colour-mode#toggleTheme",
          "colour-mode-target": "dark",
        },
      ) %>

      <%= p_radio_button(
        attribute: :color_theme,
        value: "light",
        input_name: "color-theme",
        label: t(".light_theme"),
        checked: params[:color_theme] == "light",
        data: {
          action: "change->colour-mode#toggleTheme",
          "colour-mode-target": "light",
        },
      ) %>
    </fieldset>
  <% end %>
  <% card.with_section do %>
    <%= render "locale_form", user: @user %>
  <% end %>
<% end %>
