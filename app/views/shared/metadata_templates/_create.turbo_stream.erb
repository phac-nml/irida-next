<%= turbo_stream.update "new_metadata_template_dialog",
                    partial: "shared/metadata_templates/new_template_dialog",
                    locals: {
                      open: @new_template.errors.any? ? true : false,
                      create_path:,
                      new_path:,
                    } %>

<% if @new_template.persisted? %>
  <%= turbo_stream.append "flashes" do %>
    <%= viral_flash(type:, data: message) %>
  <% end %>
  <%= turbo_stream.replace "metadata-templates-table" do %>
    <%= turbo_frame_tag "metadata-templates-table", src: index_path do %>
      <%= render SpinnerComponent.new(
        message: t("metadata_templates.table_component.spinner_message"),
      ) %>
    <% end %>
  <% end %>
<% else %>
  <%= turbo_stream.update "new_metadata_template_alert",
                      viral_alert(type:, message:, classes: "mb-4") %>
<% end %>
