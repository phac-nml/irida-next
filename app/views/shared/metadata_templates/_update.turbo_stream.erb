<%= turbo_stream.update "dialog_edit_#{dom_id(@metadata_template)}",
                    partial: "shared/metadata_templates/edit_template_dialog",
                    locals: {
                      open: @metadata_template.errors.any? ? true : false,
                      edit_path: edit_path,
                      update_path: update_path,
                      edit_template_button_text: edit_template_button_text,
                      template: @metadata_template,
                    } %>

<% if !@metadata_template.errors.any? %>
  <%= turbo_stream.append "flashes" do %>
    <%= viral_flash(type:, data: message) %>
  <% end %>
  <%= turbo_stream.replace @metadata_template do %>
    <%= render MetadataTemplates::RowComponent.new(
      @metadata_template,
      @namespace,
      {
        update_metadata_templates: @allowed_to[:update_metadata_templates],
        destroy_metadata_templates: @allowed_to[:destroy_metadata_templates],
      },
    ) %>
  <% end %>
<% else %>
  <%= turbo_stream.update "alert_edit_#{dom_id(@metadata_template)}",
                      viral_alert(type:, message:, classes: "mb-4") %>
<% end %>
