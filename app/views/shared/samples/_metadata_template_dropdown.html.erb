<div
  class="flex max-sm:grow"
  <% if Flipper.enabled?(:flowbite_replacement) %>
  data-controller="viral--dropdown"
  <% else %>
  data-controller="viral--flowbite-dropdown"
  data-viral--flowbite-dropdown-skidding-value="0"
  data-viral--flowbite-dropdown-distance-value="10"
  <% end %>
>
  <button
    <% if Flipper.enabled?(:flowbite_replacement) %>
    data-viral--dropdown-target="trigger"
    <% else %>
    data-viral--flowbite-dropdown-target="trigger"
    <% end %>
    title="<%= t("shared.samples.metadata_templates.tooltip") %>"
    id="metadata-template-dd-trigger"
    class="button button-default w-full"
    type="button"
    aria-haspopup="true"
    aria-expanded="false"
    aria-controls="metadata-template-dd-menu"
  >
    <span id="metadata-template-dd-label">
      <%= t("shared.samples.metadata_templates.label") %>
    </span>
    <%= pathogen_icon(:sliders_horizontal, size: :sm, class: "ml-2 flex-none") %>
  </button>
  <!-- Dropdown menu -->
  <% options = { hidden: "" } %>
  <% if Flipper.enabled?(:flowbite_replacement) %>
    <% options["data-viral--dropdown-target"] = "menu" %>
  <% else %>
    <% options["data-viral--flowbite-dropdown-target"] = "menu" %>
  <% end %>
  <%= turbo_frame_tag "metadata-template-dd-menu", class: "
       w-48 bg-white divide-y divide-slate-100 rounded-lg shadow-sm
      dark:bg-slate-700 dark:divide-slate-600 z-30
    ", **options, src: url, refresh: "morph", loading: :lazy do %>
    <%= render SpinnerComponent.new(
      message: t("shared.samples.metadata_templates.loading"),
    ) %>
  <% end %>
</div>
