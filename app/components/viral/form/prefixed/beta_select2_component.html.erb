<div class="@container">
  <div class="flex flex-row @max-md:flex-col">
    <div
      class="
        overflow-hidden rounded-l-lg rounded-r-lg border border-slate-300 bg-slate-100 px-4 py-2 text-sm font-medium
        text-ellipsis text-slate-700 @md:!rounded-r-none @md:border-r-0 dark:border-slate-600 dark:bg-slate-700
        dark:text-slate-300
      "
      title="<%= root_url %>"
    >
      <%= root_url %>
    </div>

    <div class="grow">
      <div data-action="keydown->viral--beta-select2#keydown" class="select2">
        <input
          type="text"
          id="<%= id %>"
          name="<%= id %>"
          role="combobox"
          data-viral--beta-select2-target="trigger"
          data-action="input->viral--beta-select2#input"
          placeholder="<%= placeholder %>"
          <%= "required" if required %>
          autocomplete="off"
          class="
            select2-input block w-full overflow-hidden rounded-l-lg rounded-r-lg border-slate-300 p-2 text-ellipsis
            text-slate-800 sm:text-sm @min-md:rounded-l-none! dark:border-slate-600 dark:bg-slate-800
            dark:text-slate-50 dark:placeholder-slate-400
          "
          value="<%= selected_value %>"
          aria-controls="select2-listbox"
          aria-autocomplete="list"
          aria-expanded="false"
          <% if aria.present? %>
            <% aria.each do |key, value| %>
              <%= "aria-#{key}=#{value}" %>
            <% end %>
          <% end %>
        >

        <%= form.hidden_field name, data: { "viral--beta-select2-target": "hidden" } %>

        <div
          data-viral--beta-select2-target="menu"
          class="
            absolute z-10 rounded-lg border border-slate-300 bg-white shadow-lg dark:border-slate-700
            dark:bg-slate-800
          "
          hidden
        >
          <ul
            id="select2-listbox"
            data-viral--beta-select2-target="scroller"
            role="listbox"
            class="
              max-h-[300px] w-full divide-y divide-slate-200 overflow-y-auto py-2 wrap-anywhere
              dark:divide-slate-800
            "
          >
            <% options.each do |option| %>
              <%= option %>
            <% end %>

            <% if empty_state? %>
              <li
                role="option"
                aria-disabled="true"
                aria-selected="false"
                class="
                  pointer-events-none border border-blue-300 bg-blue-50 p-4 text-blue-800 dark:border-blue-800
                  dark:bg-slate-800 dark:text-blue-400
                "
                hidden
                data-viral--beta-select2-target="empty"
              >
                <%= empty_state %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>

    <% if path_separator %>
      <div class="w-1 @max-md:hidden @min-md:mt-2 @min-md:ml-4 dark:text-slate-300">/</div>
    <% end %>
  </div>
</div>
