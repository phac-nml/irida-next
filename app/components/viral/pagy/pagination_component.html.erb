<%# filepath: /home/josh/Development/irida-next/app/components/viral/pagy/pagination_component.html.erb %>
<% a = helpers.pagy_anchor(@pagy, anchor_string: @data_string) %>
<nav class="pagy nav flex-none" aria-label="<%= t(".aria_label") %>">
  <%# Large screen layout with numbered buttons %>
  <ul class="@max-lg:hidden @lg:inline-flex h-11 -space-x-px text-base">
    <%# Previous page link %>
    <li>
      <% if @pagy.prev %>
        <%== a.(
          @pagy.prev,
          t(".previous"),
          classes:
            "flex items-center justify-center relative focus-visible:z-10 text-slate-700 bg-white border border-slate-300 font-medium text-sm px-4 h-11 hover:bg-slate-100 hover:text-slate-900 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700 dark:hover:text-slate-100 border-e-0 rounded-s-lg",
          aria_label: t(".previous_aria_label"),
        ) %>
      <% else %>
        <span
          class="
            flex items-center justify-center px-4 h-11 ms-0 leading-tight border
            border-slate-300 text-slate-600 bg-slate-100 dark:bg-slate-800
            dark:text-slate-400 dark:border-slate-700 cursor-not-allowed rounded-s-lg
          "
        ><%= t(".previous") %></span>
      <% end %>
    </li>
    <%# Page links (series example: [1, :gap, 7, 8, "9", 10, 11, :gap, 36]) %>
    <% @pagy.series.each do |item| %>
      <li>
        <% if item.is_a?(Integer) %>
          <%== a.(
            item,
            classes:
              "flex items-center justify-center relative focus-visible:z-10 text-slate-700 bg-white border border-slate-300 font-medium text-sm px-4 h-11 hover:bg-slate-100 hover:text-slate-900 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700 dark:hover:text-slate-100",
            aria_label: t(".item_aria_label", number: item),
          ) %>
        <% elsif item.is_a?(String) %>
          <a
            href="javascript:void(0);"
            aria-current="page"
            class="
              flex items-center relative focus-visible:z-10 justify-center px-4 h-11 ms-0
              leading-tight border border-primary-600 bg-primary-600 text-white
              dark:border-primary-600 dark:text-white font-medium text-sm cursor-default
            "
          ><%= item %></a>
        <% elsif item == :gap %>
          <span
            class="
              flex items-center justify-center px-4 h-11 ms-0 leading-tight border
              border-slate-300 text-slate-600 bg-slate-100 dark:bg-slate-800
              dark:text-slate-400 dark:border-slate-700 cursor-default
            "
          >...</span>
        <% end %>
      </li>
    <% end %>
    <%# Next page link %>
    <li>
      <% if @pagy.next %>
        <%== a.(
          @pagy.next,
          t(".next"),
          classes:
            "flex items-center justify-center relative focus-visible:z-10 text-slate-700 bg-white border border-slate-300 font-medium text-sm px-4 h-11 hover:bg-slate-100 hover:text-slate-900 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700 dark:hover:text-slate-100 border-e-0 rounded-s-lg",
          aria_label: t(".next_aria_label"),
        ) %>
      <% else %>
        <span
          class="
            flex items-center justify-center px-4 h-11 ms-0 leading-tight border
            border-slate-300 text-slate-600 bg-slate-100 dark:bg-slate-800
            dark:text-slate-400 dark:border-slate-700 cursor-not-allowed rounded-e-lg
          "
        ><%= t(".next") %></span>
      <% end %>
    </li>
  </ul>

  <%# Small screen layout with connected button group %>
  <div class="@lg:hidden @max-lg:inline-flex items-stretch h-11 mb-10">
    <%# Previous page link for small screens %>
    <% if @pagy.prev %>
      <%== a.(
        @pagy.prev,
        t(".previous"),
        classes:
          "flex items-center justify-center relative focus-visible:z-10 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 border border-slate-300 dark:border-slate-600 rounded-l-lg",
        aria_label: t(".previous_aria_label"),
      ) %>
    <% else %>
      <span
        class="
          flex items-center justify-center px-3 py-2 text-sm font-medium text-slate-600
          bg-slate-100 dark:bg-slate-800 dark:text-slate-400 cursor-not-allowed border
          border-slate-300 dark:border-slate-600 rounded-l-lg
        "
      ><%= t(".previous") %></span>
    <% end %>

    <%# Page dropdown %>
    <select
      class="
        bg-white border border-slate-300 dark:border-slate-600 text-slate-900 text-sm
        px-2 py-2 dark:bg-slate-700 dark:text-white flex-1 min-w-0 pr-8 focus:z-10
        relative border-l-0 border-r-0
      "
      aria-label="<%= t(".select_page_aria_label") %>"
      onchange="window.location.href = this.options[this.selectedIndex].dataset.url"
    >
      <% (1..@pagy.pages).each do |page_num| %>
        <option
          value="<%= page_num %>"
          <%= 'selected' if page_num == @pagy.page %>
          data-url="<%= helpers.pagy_url_for(@pagy, page_num) %>"
          aria-label="<%= page_num == @pagy.page ? t('.current_page_aria_label', number: page_num) : t('.item_aria_label', number: page_num) %>"
        >
          <%= if page_num == @pagy.page
            t(".current_page", number: page_num)
          else
            t(".page_number", number: page_num)
          end %>
        </option>
      <% end %>
    </select>

    <%# Next page link for small screens %>
    <% if @pagy.next %>
      <%== a.(
        @pagy.next,
        t(".next"),
        classes:
          "flex items-center justify-center relative focus-visible:z-10 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 border border-slate-300 dark:border-slate-600 rounded-r-lg",
        aria_label: t(".next_aria_label"),
      ) %>
    <% else %>
      <span
        class="
          flex items-center justify-center px-3 py-2 text-sm font-medium text-slate-600
          bg-slate-100 dark:bg-slate-800 dark:text-slate-400 cursor-not-allowed border
          border-slate-300 dark:border-slate-600 rounded-r-lg
        "
      ><%= t(".next") %></span>
    <% end %>
  </div>
</nav>
