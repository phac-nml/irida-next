<%= tag.div(data: { action: "keydown->viral--select2#keydown" }, class: "select2") do %>
  <%= tag.input(
    type: "text",
    id: id,
    name: id,
    data: {
      "viral--select2-target" => "trigger",
      action: "input->viral--select2#input",
    },
    placeholder: placeholder,
    required: required,
    autocomplete: "off",
    class:
      "select2-input border-slate-300 text-slate-800 sm:text-sm rounded-lg block w-full p-2.5 dark:bg-slate-800 dark:border-slate-600 dark:placeholder-slate-400 dark:text-slate-50",
    value: selected_value.presence,
    aria: {
      describedby: aria_describedby.presence,
      invalid: aria_invalid,
      required: aria_required,
    },
  ) %>

  <%= form.hidden_field name, data: { "viral--select2-target": "hidden" } %>

  <%= tag.div(
    data: { "viral--select2-target": "menu" },
    class: "z-10 hidden w-full bg-white divide-y rounded-lg shadow-sm divide-slate-100 dark:bg-slate-700",
  ) do %>
    <%= tag.ul(
      data: { "viral--select2-target": "scroller" },
      role: "listbox",
      class: "max-h-[300px] w-full py-2 overflow-y-auto divide-y divide-slate-200 dark:divide-slate-800",
    ) do %>
      <% options.each do |option| %>
        <%= option %>
      <% end %>

      <% if empty_state? %>
        <%= tag.li(
          empty_state,
          role: "option",
          aria: {
            disabled: "true",
            selected: "false",
          },
          class:
            "hidden p-4 text-blue-800 border border-blue-300 bg-blue-50 dark:bg-slate-800 dark:text-blue-400 dark:border-blue-800 pointer-events-none",
          data: { "viral--select2-target": "empty" },
        ) %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
