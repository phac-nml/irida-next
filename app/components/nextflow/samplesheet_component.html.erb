<div class="sample-sheet">
  <div class="hidden" data-nextflow--samplesheet-target="workflowAttributes">
    <%= samples_workflow_executions_attributes.to_json %>
  </div>
  <div class="hidden" data-nextflow--samplesheet-target="samplesheetProperties">
    <%= @properties.to_json %>
  </div>
  <div class="flex mb-2 justify-between">
    <label class="text-sm font-medium text-slate-900 dark:text-white mt-auto"><%= t(".label") %></label>
    <div class="relative">
      <input
        id="samplesheet-filter"
        data-nextflow--samplesheet-target="filter"
        data-action="keydown.enter->nextflow--samplesheet#filter"
        class="
          t-search-component block w-full p-2.5 pl-10 text-sm text-slate-900 border
          border-slate-300 rounded-lg bg-slate-50 focus:ring-primary-500
          focus:border-primary-500 dark:bg-slate-700 dark:border-slate-600
          dark:placeholder-slate-400 dark:text-white dark:focus:ring-primary-500
          dark:focus:border-primary-500
        "
        placeholder="Filter by ID or name"
        type="search"
      />
      <div
        class="
          absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none
        "
      >
        <%= viral_icon(
          name: "magnifying_glass",
          classes: "w-4 h-4 text-slate-500 dark:text-slate-400",
        ) %>
      </div>
    </div>
  </div>
  <div
    role="alert"
    class="
      hidden flex items-center p-4 border-l-4 text-red-800 border-red-300 bg-red-50
      dark:text-red-400 dark:bg-slate-800 dark:border-red-800 mb-2
    "
    data-nextflow--samplesheet-target="error"
  >
    <span class="flex-shrink-0 inline">
      <%= viral_icon(name: "exclamation_circle", classes: "w-5 h-5 mr-3 stroke-2") %>
    </span>
    <div>
      <div
        class="font-medium whitespace-break-spaces"
        data-nextflow--samplesheet-target="errorMessage"
      ></div>
    </div>
  </div>
  <div
    data-nextflow--samplesheet-target="table"
    class="
      samplesheet-table flex border dark:border-slate-600 border-slate-100 max-h-72
      overflow-y-auto relative mb-1
    "
  >
    <% properties.each do |header, property| %>
      <%= render Nextflow::Samplesheet::HeaderComponent.new(
        namespace_id:,
        header:,
        property:,
        samples: @samples,
        metadata_fields:,
        required_properties:,
        workflow_params:,
      ) %>
    <% end %>
  </div>
  <div
    data-nextflow--samplesheet-target="emptyState"
    class="hidden flex justify-center"
  >
    <%= render Viral::EmptyStateComponent.new(
      icon_name: :magnifying_glass,
      title: t("components.viral.pagy.empty_state.title"),
      description: t("components.viral.pagy.empty_state.description"),
    ) %>
  </div>
  <div
    data-nextflow--samplesheet-target="paginationContainer"
    class="flex items-center justify-end"
  >
  </div>
</div>

<template data-nextflow--samplesheet-target="cellContainer">
  <div
    style="content-visibility: auto;"
    class="border table-td dark:border-slate-600 border-slate-100"
  >
  </div>
</template>

<template data-nextflow--samplesheet-target="sampleIdentifierCell">
  <div class="p-2.5 sticky left-0">
    SAMPLE_IDENTIFIER
  </div>
</template>

<template data-nextflow--samplesheet-target="dropdownCell">
  <select
    aria-label="COLUMN_NAME_PLACEHOLDER"
    class="
      w-full focus:ring-primary-500 focus:border-primary-500 p-2.5 dark:bg-slate-700
      bg-slate-50 border-none dark:border-none dark:placeholder-slate-400 text-inherit
      text-sm dark:focus:ring-primary-500 dark:focus:border-primary-500 cursor-pointer
    "
    data-action="change->nextflow--samplesheet#updateEditableSamplesheetData"
    name="workflow_execution[samples_workflow_executions_attributes][INDEX_PLACEHOLDER][samplesheet_params][COLUMN_NAME_PLACEHOLDER]"
    id="workflow_execution_samples_workflow_executions_attributes_INDEX_PLACEHOLDER_samplesheet_params_COLUMN_NAME_PLACEHOLDER"
  >
    <option value="" label=" "></option>
  </select>
</template>

<template data-nextflow--samplesheet-target="fileCell">
  <div>
    <%= link_to new_workflow_executions_file_selector_path(
  "file_selector[attachable_id]": "ATTACHABLE_ID_PLACEHOLDER",
  "file_selector[attachable_type]": "ATTACHABLE_TYPE_PLACEHOLDER",
  "file_selector[index]": "INDEX_PLACEHOLDER",
  "file_selector[selected_id]": "SELECTED_ID_PLACEHOLDER",
  "file_selector[property]": "PROPERTY_PLACEHOLDER",
  "file_selector[pattern]": "PATTERN_PLACEHOLDER",
  "file_selector[required_properties]": @required_properties,
),
data: {
  turbo_stream: "true",
} do %>
      <div
        id="<%="ATTACHABLE_ID_PLACEHOLDER_PROPERTY_PLACEHOLDER" %>"
        class="
          w-full focus:ring-primary-500 focus:border-primary-500 p-2 dark:bg-inherit
          bg-inherit dark:placeholder-slate-400 text-inherit text-sm
          dark:focus:ring-primary-500 dark:focus:border-primary-500 cursor-pointer
          hover:border-slate-300 border-transparent border-2
        "
      >
        FILENAME_PLACEHOLDER
      </div>
    <% end %>
  </div>
</template>

<template data-nextflow--samplesheet-target="metadataCell">
  <div class="p-2.5 text-nowrap">
    <span class="h-3.5 inline-block">METADATA_PLACEHOLDER</span>
  </div>
</template>

<template data-nextflow--samplesheet-target="textCell">
  <label for="ID_PLACEHOLDER" class="sr-only">NAME_PLACEHOLDER</label>
  <input
    class="
      bg-slate-50 border-0 text-slate-900 text-sm focus:ring-primary-500 block w-full
      p-2.5 dark:bg-slate-700 dark:border-slate-600 dark:placeholder-slate-400
      dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500
    "
    data-action="change->nextflow--samplesheet#updateEditableSamplesheetData"
    type="text"
    name="NAME_PLACEHOLDER"
    id="ID_PLACEHOLDER"
  />
</template>

<template data-nextflow--samplesheet-target="pagination">
  <nav aria-label="<%= t("viral.pagy.pagination_component.aria-label") %>">
    <ul class="inline-flex h-10 text-base">
      <li><button
          type="button"
          class="
            flex items-center justify-center px-4 h-10 ms-0 leading-tight border
            border-slate-300 dark:border-slate-700 cursor-default text-slate-600 bg-slate-50
            dark:bg-slate-700 dark:text-slate-400 border-e-0 rounded-s-lg
          "
          data-action="click->nextflow--samplesheet#previousPage"
          data-nextflow--samplesheet-target="previousBtn"
          disabled="disabled"
        ><%= t(".previous") %></button>
      </li>
      <li><select
          class="
            flex items-center justify-center px-4 h-10 ms-0 leading-tight border
            border-slate-300 dark:border-slate-700 text-slate-500 bg-white
            hover:bg-slate-100 hover:text-slate-700 dark:bg-slate-800 dark:text-slate-400
            dark:hover:bg-slate-700 dark:hover:text-white cursor-pointer focus:ring-0
            focus:border-primary-500 dark:focus:border-primary-500
          "
          data-nextflow--samplesheet-target="pageNum"
          data-action="change->nextflow--samplesheet#pageSelected"
          aria-label="<%= t(".page_selection.aria_label") %>"
        ><option value="1" selected="selected">1</option></select>
      </li>
      <li><button
          class="
            flex items-center justify-center px-4 h-10 ms-0 leading-tight border
            border-slate-300 dark:border-slate-700 text-slate-500 bg-white
            hover:bg-slate-100 hover:text-slate-700 dark:bg-slate-800 dark:text-slate-400
            dark:hover:bg-slate-700 dark:hover:text-white rounded-e-lg border-l-0
          "
          type="button"
          data-nextflow--samplesheet-target="nextBtn"
          data-action="click->nextflow--samplesheet#nextPage"
        ><%= t(".next") %></button>
      </li>
    </ul>
  </nav>
</template>
