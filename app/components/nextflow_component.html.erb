<h1
  class="
    mb-4
    text-2xl
    font-extrabold
    leading-none
    tracking-tight
    text-gray-900
    md:text-5xl
    lg:text-4xl
    dark:text-white
  "
>
  <%= schema["title"] %>
</h1>
<p class="mb-4 text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400">
  <%= schema["description"] %>
</p>
<form method="post" action="#">
  <% schema["definitions"].each do |_item, definition| %>
    <%- if definition["properties"]
      .values
      .filter { |property| !property.key?("hidden") }
      .length > 0 %>
      <h2 class="text-2xl font-extrabold dark:text-white">
        <%= definition["title"] %>
      </h2>
      <p class="mb-2 text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400">
        <%= definition["description"] %>
      </p>
      <div class="grid grid-cols-1 gap-4 mb-8">
        <% definition["properties"].each do |name, property| %>
          <%- if property["type"] == "boolean" %>
            <%= viral_checkbox(
              name:,
              label: property["description"],
              default: property["default"],
              help_text: property["help_text"],
              hidden: property["hidden"],
              value: name
            ) %>
          <% end %>
          <%- if property["enum"] %>
             <%= viral_select(
               name:,
                label: property["description"],
                options: property["enum"].map { |option| { value: option, label: option } },
                selected_value: property["default"],
                required: property["required"],
                help_text: property["help_text"],
                hidden: property["hidden"]
              ) %>
          <% else %>
            <%= viral_text_input(
              name:,
              label: property["description"],
              **input_type(property),
              default: property["default"],
              required: property["required"],
              help_text: property["help_text"],
              hidden: property["hidden"],
              (definition["required"].present? && definition["required"].include?(name) ? "required".html_safe : nil)
            ) %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  <% end %>
  <button type="submit">Submit</button>
</form>
